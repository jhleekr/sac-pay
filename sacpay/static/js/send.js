var e,t=0,n=new XMLHttpRequest;n.onreadystatechange=function(){if(200==this.status&&this.readyState==this.DONE){var l=JSON.parse(n.responseText);e=l,document.getElementById("balance").innerHTML="잔액: "+e.balance+"ƕ",document.getElementById("l3balance").innerHTML="잔액: "+e.balance+"ƕ",t+=1,d()}};var l=new XMLHttpRequest;l.onreadystatechange=function(){200==this.status&&this.readyState==this.DONE&&a(JSON.parse(l.responseText).name,document.getElementById("amnt").value);200!=this.status&&this.readyState==this.DONE&&m(lang=="ko"?"계좌번호가 잘못되었습니다.":"Account Number is Invalid","")},l.onerror=function(){m(lang=="ko"?"계좌번호가 잘못되었습니다.":"Account Number is Invalid.","")};var s=new XMLHttpRequest;function d(){2==t&&(document.getElementById("loading").style.display="none")}function a(e,t){for(document.getElementById("l2text1").innerHTML=e+" 님에게",document.getElementById("l2text2").innerHTML=t+"ƕ를 송금할까요?",document.getElementById("l2cfrm").innerHTML=lang=="ko"?"보내기":"Send",document.getElementById("l2deny").onclick=o,document.getElementById("l2cfrm").onclick=function(){var e=new FormData;e.append("ano",document.getElementById("ano").value),e.append("amnt",Number(document.getElementById("amnt").value)),e.append("desc",document.getElementById("desc").value),s.open("POST","/xhr/sd",!0),s.send(e)},elems=document.getElementsByClassName("popup"),i=0;i<elems.length;i++){var n=elems.item(i);"l2ctn"==n.id?n.style.display="flex":n.style.display="block","l2ctn"!=n.id&&"l2bg"!=n.id||(n.classList.remove("effect"),n.offsetWidth,n.classList.add("effect"))}}function m(e,t){for(document.getElementById("l2text1").innerHTML=e,document.getElementById("l2text2").innerHTML=t,document.getElementById("l2cfrm").innerHTML=lang=="ko"?"확인":"Confirm",document.getElementById("l2cfrm").onclick=o,elems=document.getElementsByClassName("popup"),i=0;i<elems.length;i++){var n=elems.item(i);"l2deny"!=n.id&&("l2ctn"==n.id?n.style.display="flex":n.style.display="block","l2ctn"!=n.id&&"l2bg"!=n.id||(n.classList.remove("effect"),n.offsetWidth,n.classList.add("effect")))}}function o(){for(elems=document.getElementsByClassName("popup"),i=0;i<elems.length;i++)elems.item(i).style.display="none"}function c(){for(n.open("GET","/xhr/usr",!0),n.send(),document.getElementById("l3cfrm").onclick=function(){window.location.href="/home"},elems=document.getElementsByClassName("done"),i=0;i<elems.length;i++)"l3bg"==elems.item(i).id?elems.item(i).style.display="flex":elems.item(i).style.display="block"}s.onreadystatechange=function(){if(200==this.status&&this.readyState==this.DONE){JSON.parse(s.responseText);c()}200!=this.status&&this.readyState==this.DONE&&m(lang=="ko"?"송금 중 문제가 발생하였습니다.":"Error Occured.","")},l.onerror=function(){m(lang=="ko"?"송금 중 문제가 발생하였습니다.":"Error Occured.","")},n.open("GET","/xhr/usr",!0),n.send(),this.onload=function(){t+=1,d()},document.getElementById("confirm").onclick=function(){var t=new FormData;if(8==document.getElementById("ano").value.length){try{if(Number(document.getElementById("amnt").value)>e.balance||Number(document.getElementById("amnt").value)<=0)return void m(lang=="ko"?"잔액이 부족합니다.":"Not Enough Balance.","")}catch{m(lang=="ko"?"금액이 유효하지 않습니다.":"Invalid Amount.","")}document.getElementById("desc").value.length>10||document.getElementById("desc").value.length<1?m(lang=="ko"?"통장 표기는 최대 10글자만":"Passbook Display is",lang=="ko"?"가능합니다.":"Too Long."):(t.append("ano",document.getElementById("ano").value),l.open("POST","/xhr/qn",!0),l.send(t))}else m(lang=="ko"?"계좌번호가 잘못되었습니다.":"Account Number is Invalid.","")};